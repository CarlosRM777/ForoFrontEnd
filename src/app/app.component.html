<!-- Bootstrap 4.4.1 -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css" integrity="sha256-46r060N2LrChLLb5zowXQ72/iKKNiw/lAmygmHExk/o=" crossorigin="anonymous" />
<div class="container" id="main-container">
<div class="main-body p-0">
    <div class="inner-wrapper">
        <!-- Inner sidebar -->
        <div class="inner-sidebar">
            <!-- Inner sidebar header -->
            <div class="inner-sidebar-header justify-content-center">
                <button *ngIf="this.isLogin" class="btn btn-primary has-icon btn-block" type="button" data-toggle="modal" data-target="#threadModal">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus mr-2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    NEW QUESTION
                </button> 
            </div>
            <!-- /Inner sidebar header -->

            <!-- Inner sidebar body -->
            <div class="inner-sidebar-body p-0">
                <div class="p-3 h-100" data-simplebar="init">
                    <div class="simplebar-wrapper" style="margin: -16px;">
                        <div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div>
                        <div class="simplebar-mask">
                            <div class="simplebar-offset" style="right: 0px; bottom: 0px;">
                                <div class="simplebar-content-wrapper" style="height: 100%; overflow: hidden scroll;">
                                    <div class="simplebar-content" style="padding: 16px;">
                                        <nav class="nav nav-pills nav-gap-y-1 flex-column">
                                            <a href="javascript:void(0)" class="nav-link nav-link-faded has-icon active">All Threads</a>
                                            <a href="javascript:void(0)" class="nav-link nav-link-faded has-icon">Popular this week</a>
                                            <a href="javascript:void(0)" class="nav-link nav-link-faded has-icon">Popular all time</a>
                                            <a href="javascript:void(0)" class="nav-link nav-link-faded has-icon">Solved</a>
                                            <a href="javascript:void(0)" class="nav-link nav-link-faded has-icon">Unsolved</a>
                                            <a href="javascript:void(0)" class="nav-link nav-link-faded has-icon">No replies yet</a>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="simplebar-placeholder" style="width: 234px; height: 292px;"></div>
                    </div>
                    <div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div>
                    <div class="simplebar-track simplebar-vertical" style="visibility: visible;"><div class="simplebar-scrollbar" style="height: 151px; display: block; transform: translate3d(0px, 0px, 0px);"></div></div>
                </div>
            </div>
            <!-- /Inner sidebar body -->
        </div>
        <!-- /Inner sidebar -->

        <!-- Inner main -->
        <div class="inner-main">
            <!-- Inner main header -->
            <div class="inner-main-header">
                <!-- <a class="nav-link nav-icon rounded-circle nav-link-faded mr-3 d-md-none" href="#" data-toggle="inner-sidebar"><i class="material-icons">arrow_forward_ios</i></a> -->
<!--                 <select class="custom-select custom-select-sm w-auto mr-1">
    
                    <option selected="">Latest</option>
                    <option value="1">Popular</option>
                    <option value="3">Solved</option>
                    <option value="3">Unsolved</option>
                    <option value="3">No Replies Yet</option>
                </select> -->

                <button *ngIf="!this.isLogin" class="btn btn-primary" type="button" data-toggle="modal" data-target="#loginModal">
                    LOGIN
                </button> 

                <button *ngIf="this.isLogin" (click)="onLogout()" class="btn btn-light" type="button" data-toggle="modal">
                    LOGOUT
                </button> 

                <label *ngIf="this.isLogin" class="label-welcome"><span class="text-center font-weight-bold">
                   Bienvenido {{author_login.name}}</span></label>
                <!--<div class="col-4">-->
                 <span class="input-icon input-icon-sm ml-auto w-auto"> 
                    <input (ngModelChange)="searchQuestions(key.value)" ngModel #key="ngModel" type="text" class="form-control form-control-sm bg-gray-200 border-gray-200 shadow-none mb-4 mt-4" placeholder="Search Questions" />
                 </span> 
                <!--</div>-->
            </div>
            <!-- /Inner main header -->

            <!-- Inner main body -->

            <!-- Forum List -->
            <div class="inner-main-body p-2 p-sm-3 collapse forum-content show">
                <div *ngFor = "let question of questions; let i = index" class="card mb-2">
                    <div class="card-body p-2 p-sm-3">
                        <div class="media forum-item">
                            <a href="#" data-toggle="collapse" data-target=".forum-content"><img src='{{"https://bootdey.com/img/Content/avatar/avatar"+(i%5+1)+".png"}}' class="mr-3 rounded-circle" width="50" alt="User" /></a> 
                            <!-- "https://bootdey.com/img/Content/avatar/avatar1.png"-->
                            <div class="media-body col-11">
                                <h6><a href="#" (click)="onGetAnswers(question)" data-toggle="collapse" data-target=".forum-content" class="text-body">{{question?.title}}</a></h6>
                                <!-- <p class="text-secondary">
                                    {{question?.detail}}
                                </p> -->
                                <ckeditor #chkQuestions [editor]="Editor" data="{{question?.detail}}" [config]="{ toolbar: [ ] }" [disabled]="true"></ckeditor>
                                <p class="text-muted"><a href="javascript:void(0)">{{question?.author?.username}} </a> created a Question on
                                    <!-- <span class="text-secondary font-weight-bold">{{question?.creationDate}}</span> -->
                                    <small class="text-secondary font-weight-bold">{{question?.creationDate}}</small>
                                </p>
                            </div>
                            <div class="text-muted small text-center align-self-center">
                                <span class="d-none d-sm-inline-block"><i class="far fa-eye"></i> {{question?.views}}</span>
                                <span><i class="far fa-comment ml-2"></i> {{question?.answers?.length}}</span>
                                <div class="row">
                                    <div *ngIf="this.question.idcorrectAnswer && this.question.idcorrectAnswer!==0" class="nav-link-correct">
                                        <h6>Question Solved</h6>
                                    </div>
                                    <div *ngIf="!this.question.idcorrectAnswer || this.question.idcorrectAnswer===0" class="label-solved">
                                        <h6>Not Solved Yet</h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <ul class="pagination pagination-sm pagination-circle justify-content-center mb-0">
                    <li class="page-item disabled">
                        <span class="page-link has-icon"><i class="material-icons">chevron_left</i></span>
                    </li>
                    <li class="page-item"><a class="page-link" href="javascript:void(0)">1</a></li>
                    <li class="page-item active"><span class="page-link">2</span></li>
                    <li class="page-item"><a class="page-link" href="javascript:void(0)">3</a></li>
                    <li class="page-item">
                        <a class="page-link has-icon" href="javascript:void(0)"><i class="material-icons">chevron_right</i></a>
                    </li>
                </ul> -->
            </div>
            <!-- /Forum List -->

            <!-- Forum Detail -->

            <div class="inner-main-body p-2 p-sm-3 collapse forum-content"> 
            <a href="#" (click)="getQuestions()" class="btn btn-light btn-sm mb-3 has-icon" data-toggle="collapse" data-target=".forum-content"><i class="fa fa-arrow-left mr-2"></i>BACK</a>

            <div class="blog-single gray-bg">
                <article class="article">
                    <div class="article-title">
                        <h2>{{question.title}}</h2>
                        <div class="media">
                            <div class="avatar">
                                <img class="rounded-circle" width="60" src="https://bootdey.com/img/Content/avatar/avatar1.png" alt="">
                            </div>
                            <div class="media-body">
                                <label>{{question.author?.name}}</label>
                                <span><i class="fa fa-calendar"></i>{{question.creationDate}}</span>
                            </div>
                            <div class="row justify-content-start">
                                <div *ngIf="this.question.idcorrectAnswer && this.question.idcorrectAnswer!==0" class="nav-link-correct">
                                    <h3>Question Solved &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                                </div>
                                <div *ngIf="!this.question.idcorrectAnswer || this.question.idcorrectAnswer===0" class="label-welcome ">
                                    <h3>Question Not Solved Yet&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="article-content"> 
                        <ckeditor [editor]="Editor" [(ngModel)]="question.detail" [config]="{ toolbar: [ ] }" [disabled]="true"></ckeditor>

                        <!-- <p>{{question.detail}}</p> -->
                    </div> 
                </article>
            </div>
            <!-- </div> -->
                <form *ngIf="this.isLogin" class="was-validated" #newAnswerForm="ngForm" (ngSubmit)="onAddAnswer(newAnswerForm)">
                	<h5 class="pull-left">New Comment</h5>
                    <fieldset>
                        <div class="row">
                            <div class="col-sm-2 col-lg-1 hidden-xs">
                            	<img class="rounded-circle" width="60" alt="" src="https://bootdey.com/img/Content/avatar/avatar1.png">
                            </div> 
                            <div class="col-xs-12 col-sm-10 col-lg-11">
                                <ckeditor name="Mnewdetail" ngModel [editor]="Editor" placeholder="Your Answer" required></ckeditor>
                                <!-- <textarea name="Mnewdetail" ngModel class="form-control" id="message" placeholder="Your Answer" required></textarea> -->
                            </div>
                        </div>  
                        <button [disabled]="newAnswerForm.invalid" type="submit" class="btn btn-primary btn-sm">Submit</button>
                    </fieldset>
                </form>
                <!-- </div>
                </div> 
            </div> -->
                <p></p>
                <h4>{{question.answers.length}} Answers</h4>
                
                <form class="forum-item" #uptAnswerForm="ngForm" (ngSubmit)="onUpdAnswer(uptAnswerForm)">
                <div class="card mb-2" *ngFor="let answer of question.answers">
                    <div class="card-body">
                        <div class="media forum-item">
                            <a href="javascript:void(0)" class="card-link">
                                <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="rounded-circle" width="50" alt="User" />
                                <small class="d-block text-center text-muted">{{answer.author.username}}</small>
                            </a>
                            <div class="media-body ml-3">
                                <a href="javascript:void(0)" class="text-secondary">{{answer.author.name}}</a>
                                <!-- <small class="text-muted ml-2">1 hour ago</small> -->
                                <small class="text-muted ml-2"><i class="fa fa-calendar"></i>{{answer.date}}</small>
                                <div class="mt-3 font-size-sm">
                                    <!-- <p>
                                        {{answer.detail}}
                                    </p>
                                    <p></p> -->
                                    <ckeditor #chkAnswers [editor]="Editor" data="{{answer.detail}}" [config]="{ toolbar: [ ] }" [disabled]="true"></ckeditor>
                                </div>
                            </div>
                        </div>
                        <div class="media-body">
                            <div class="text-muted col-3">
                                <a style="cursor: pointer;" class="far fa-thumbs-up md-2" (click)="onAddImpression(true, answer)">{{answer.authors_liked?.length}}</a>
                                <a style="cursor: pointer;" class="far fa-thumbs-down md-2" (click)="onAddImpression(false, answer)">{{answer.authors_disliked?.length}}</a>
                            </div>
                        </div>
                        <div class="media-body">
                            <div class="col-12 align-self-end">
                            <a *ngIf="this.author_login.id === question.author.id && (!this.question.idcorrectAnswer || this.question.idcorrectAnswer===0)" href="javascript:void(0)" (click)="onSolveQuestion(answer)" class="nav-link-correct">Marcar como Correcta&nbsp;&nbsp;&nbsp;</a>
                            </div>
                            <div class="nav-link-correct col-12" *ngIf="this.question.idcorrectAnswer && this.question.idcorrectAnswer!==0 && this.question.idcorrectAnswer===answer.id">
                                <h6> &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;Correct Answer!</h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <button id="MUbtn_submit" type="submit" style="display: none;">Submit</button>
                </div>
                </form>

            </div>
            <!-- /Forum Detail -->

            <!-- /Inner main body -->
        </div>
        <!-- /Inner main -->
    </div>

    <!-- New Question Thread Modal -->
    <div class="modal fade" id="threadModal" tabindex="-1" role="dialog" aria-labelledby="threadModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <form class="was-validated" #newQuestionForm="ngForm" (ngSubmit)="onAddQuestion(newQuestionForm)">
                    <div class="modal-header d-flex align-items-center bg-primary text-white">
                        <h6 class="modal-title mb-0" id="threadModalLabel">New Question</h6>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="threadTitle">Title</label>
                            <input type="text" name="MnewTitle" ngModel class="form-control" id="threadTitle" placeholder="Enter Title" autofocus="" required />
                             <div class="valid-feedback">
                                Looks good!
                              </div> 
                              <div class="invalid-feedback">
                                Please write a Title for your Question.
                              </div> 
                              <div class="invalid-tooltip">
                                Please complete all the fields
                              </div>
                        </div>
                        <!-- <textarea class="form-control summernote" style="display: none;"></textarea>
                        <div class="form-group"> -->
                        <label for="threadDetail">Detail</label>
                        <!-- <textarea class="form-control" name="MnewDetail" ngModel id="threadDetail" placeholder="Enter Detail" autofocus="" rows="5" required></textarea> -->
                        <ckeditor id="threadDetail" name="Mnewdetail2" [(ngModel)]="this.newQDet" [editor]="Editor" required></ckeditor> 
                        <!-- <div class="valid-feedback">
                            Looks good!
                          </div> 
                          <div class="invalid-feedback">
                            Please write Details for your Question.
                          </div>
                          <div class="invalid-tooltip">
                            Please complete all the fields
                          </div> -->
                        <!-- </div> -->
                    </div>
                    <div class="modal-footer">
                        <button id="MBtnQClose" type="button" class="btn btn-light" data-dismiss="modal">Cancel</button>
                        <button [disabled]="newQuestionForm.invalid" type="submit" class="btn btn-primary"> Post Question </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- End New Question Thread Modal -->
    <!--login modal-->
<div id="loginModal" class="modal show" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header align-items-center">
            <h2 class="modal-title mb-0 text-center">
                <!-- <img src="https://bootdey.com/img/Content/avatar/avatar7.png" class="rounded-circle" width="150" > -->
                 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                  Login</h2>
        </div>
        <div class="modal-body">
            <form class="form col-md-12 center-block was-validated" #loginForm="ngForm" (ngSubmit)="onLogin(loginForm)">
              <div class="form-group">
                <input type="text" ngModel name="MLusername" class="form-control input-lg" placeholder="User" required>
              </div>
              <div class="form-group">
                <input type="password" ngModel name="MLpassword" class="form-control input-lg" placeholder="Password" required>
            </div>
              <div class="form-group">
                <button [disabled]="loginForm.invalid" type="submit" class="btn btn-primary btn-lg btn-block">Sign In</button>
                <span class="pull-right"><a data-dismiss="modal" data-toggle="modal" data-target="#RegisterModal" href="#">Register</a></span>
              </div>
            </form>
        </div>
        <div class="modal-footer">
            <div class="row">
            <div *ngIf="this.isWrongCredentials" class="col-9 align-self-start">
            <label class="label-error">Invalid Username or Password</label> 
            </div>
            <div class="col-3">
            <button id="btn_login_cancel" class="btn btn-light" data-dismiss="modal" aria-hidden="true">Cancel</button>
            </div>	
            </div>	
        </div>
    </div>
    </div>
  </div>
  <!--End login modal-->

  <!--Register Author Modal-->
<div id="RegisterModal" class="modal show" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header align-items-center">
            <h2 class="modal-title mb-0 text-center">
                 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  Register User</h2>
        </div>
        <div class="modal-body">
            <form class="form col-md-12 center-block was-validated" #registerForm="ngForm" (ngSubmit)="onRegister(registerForm)">
                <div class="form-group">
                    <input type="text" ngModel name="MRname" class="form-control input-lg" placeholder="Name" required>
                  </div>
              <div class="form-group">
                <input (ngModelChange)="searchUser(user.value)" ngModel #user="ngModel" type="text" ngModel name="MRusername" class="form-control input-lg" placeholder="User" required>
              </div>
              <div class="form-group">
                <input type="password" ngModel name="MRpassword" class="form-control input-lg" placeholder="Password" required>
            </div>
            <div class="form-group">
                <input type="text" ngModel name="MRurl" class="form-control input-lg" placeholder="URL">
            </div>
              <div class="form-group">
                <button [disabled]="registerForm.invalid" type="submit" class="btn btn-primary btn-lg btn-block">Register</button>
              </div>
            </form>
        </div>
        <div class="modal-footer">
            <div class="row">
            <!-- <div *ngIf="this.isWrongCredentials" class="col-9 align-self-start">
            <label class="label-error">Username is Already Used</label> 
            </div> -->
            <div class="col-3">
            <button id="MRbtn_cancel" class="btn btn-light" data-dismiss="modal" aria-hidden="true">Cancel</button>
            </div>	
            </div>	
        </div>
    </div>
    </div>
  </div>
  <!--End login modal-->
</div>
</div>